/*
 *  jquery-lightbox - v0.0.1
 *  Basic lightbox built off jQuery UI modal dialogs
 *  http://northrosedevs.com
 *
 *  Made by Damien Barchowsky
 *  Under MIT License
 */
!function(t,i,e,o){"use strict";function n(i,e){this.element=i,this.settings=t.extend(!0,{},s,e||{}),this._defaults=s,this._name=a,this.init()}var a="lightbox",s={callbacks:{modalContentLoaded:null,openFailure:null},cssClass:"",dataType:"html",dialogType:"",dom:{cancelButton:".dlg-cancel-btn",datePicker:".datepicker",errorContainer:".alert-error",modalContainer:"#globalDialog",modalContentContainer:"#globalDialog .dialog-content",modalErrorContainer:"#globalDialog .alert-error",modalWidget:".ui-dialog",overlay:".ui-widget-overlay",submitButton:"dlg-commit-btn"},event:"click",height:"auto",urls:{imageDialog:"/ajax/lightbox-image.php"},width:"auto"};t.extend(n.prototype,{bindDialogHandlers:function(i,e,o){var n=this;if("error"===e)return this.displayError("Error loading dialog: "+o.statusText),void("function"==typeof n.settings.callbacks.openFailure&&n.settings.callbacks.openFailure(data));if(t(this.settings.dom.modalContainer).dialog("open"),t(this.settings.dom.modalContentContainer+" img").on("load",function(){t(n.settings.dom.modalWidget).position({my:"center",at:"center",of:t(n.settings.dom.overlay)})}),t(this.settings.dom.datePicker,t(this.element)).datepicker(),t(this.settings.dom.submitButton,t(this.element)).button().on("click",t.proxy(this.commitOperation,this)),t(this.settings.dom.cancelButton,t(this.element)).button().on("click",t.proxy(this.close,this)),t(this.settings.dom.overlay).on("click",t.proxy(this.close,this)),"function"==typeof n.settings.callbacks.modalContentLoaded){var a=n.settings.callbacks.modalContentLoaded;a.apply(n,Array.prototype.slice.call(arguments,1))}},close:function(){t(this.settings.dom.modalContainer).dialog("close")},collectDialogProperties:function(){var i={};if(i.url=t(this.element).data("url"),!i.url)throw"URL not provided.";return i},collectImageDialogProperties:function(){var i={url:this.settings.urls.imageDialog,data:{}};if(i.data.src=t(this.element).data("src"),i.data.alt=t(this.element).data("alt"),!i.data.src)throw"Image not provided.";return i},commitOperation:function(){throw"commitOperaiton() not implemented."},displayError:function(i){var e=t(this.settings.dom.errorContainer);0!==e.length&&e.html(i).show("slow")},init:function(){t(this.element).off(this.settings.event,t.proxy(this.open,this)).on(this.settings.event,t.proxy(this.open,this))},open:function(e){e.preventDefault();try{var o;switch(this.settings.dialogType){case"image":o=this.collectImageDialogProperties();break;default:o=this.collectDialogProperties()}}catch(n){return void this.displayError(n)}t(this.settings.dom.modalContainer).dialog({autoOpen:!1,closeOnEscape:!0,dialogClass:this.settings.cssClass,height:this.settings.height,modal:!0,position:{my:"center",at:"center",of:i},title:"",width:this.settings.width}),t(this.settings.dom.modalContentContainer).load(o.url,o.data,t.proxy(this.bindDialogHandlers,this))}}),t.fn[a]=function(i){return this.each(function(){t.data(this,"plugin_"+a)||t.data(this,"plugin_"+a,new n(this,i))})}}(jQuery,window,document);