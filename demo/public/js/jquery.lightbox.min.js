/*
 *  jquery-lightbox - v0.0.1
 *  Basic lightbox built off jQuery UI modal dialogs
 *  http://northrosedevs.com
 *
 *  Made by Damien Barchowsky
 *  Under MIT License
 */
!function(t,o,i,e){t.widget("northrose.lightboxLink",{options:{callbacks:{modalContentLoaded:null,openFailure:null},cssClass:"",dataType:"html",dom:{errorContainer:".alert-error:first",modalContainer:"#globalDialog",modalContentContainer:"#globalDialog .dialog-content",modalErrorContainer:"#globalDialog .alert-error",modalWidget:".ui-dialog",overlay:".ui-widget-overlay"},event:"click",height:"auto",urls:{dialogContent:""},width:"auto"},_create:function(){t(this.element).off(this.options.event,t.proxy(this.open,this)).on(this.options.event,t.proxy(this.open,this))},bindDialogHandlers:function(o,i,e){if("error"===i)return this.displayError("Error loading dialog: "+e.statusText),void("function"==typeof this.options.callbacks.openFailure&&this.options.callbacks.openFailure(data));if(t(this.options.dom.modalContainer).dialog("open"),t(this.options.dom.overlay).on("click",t.proxy(this.close,this)),"function"==typeof this.options.callbacks.modalContentLoaded){var n=this.options.callbacks.modalContentLoaded;n.apply(this,Array.prototype.slice.call(arguments,1))}},close:function(){t(this.options.dom.modalContainer).dialog("close")},collectDialogProperties:function(){var o={};if(o.url=t(this.element).data("url"),!o.url)throw"URL not provided.";return o},commitOperation:function(){throw"commitOperation() not implemented."},destroy:function(){t.Widget.prototype.destroy.call(this)},displayError:function(o){var i=t(this.options.dom.errorContainer);0!==i.length&&i.html(o).show("slow")},open:function(o){o.preventDefault();try{var i=this.collectDialogProperties()}catch(e){return void this.displayError(e)}t(this.options.dom.modalContainer).dialog({autoOpen:!1,closeOnEscape:!0,dialogClass:this.options.cssClass,height:this.options.height,modal:!0,title:"",width:this.options.width}),t(this.options.dom.modalContentContainer).load(this.options.urls.dialogContent,i.data,t.proxy(this.bindDialogHandlers,this))},_setOption:function(o,i){switch(o){case"someValue":}t.Widget.prototype._setOption.apply(this,arguments)}})}(jQuery,window,document),function(t,o,i,e){t.widget("northrose.imageLightboxLink",t.northrose.lightboxLink,{options:{dataType:"html",cssClass:"lightbox-image",urls:{dialogContent:"/ajax/lightbox-image"}},bindDialogHandlers:function(o,i,e){this._super(),t(this.options.dom.modalContentContainer+" img").off("load",t.proxy(this.centerDialog,this)).on("load",t.proxy(this.centerDialog,this)),t(this.options.dom.modalContentContainer+" img").off("load",t.proxy(this.centerDialog,this)).on("click",t.proxy(this.close,this))},centerDialog:function(){t(this.options.dom.modalWidget).position({my:"center",at:"center",of:t(this.options.dom.overlay)})},collectDialogProperties:function(){var o={src:t(this.element).data("src"),alt:t(this.element).data("alt")};if(!o.src)throw"Image not provided.";return o}})}(jQuery,window,document),function(t,o,i,e){t.widget("northrose.formLightboxLink",t.northrose.lightboxLink,{options:{dataType:"html",dom:{cancelButton:".dlg-cancel-btn",datePicker:".datepicker",submitButton:"dlg-commit-btn"}},bindDialogHandlers:function(o,i,e){this._super(),t(this.options.dom.datePicker,t(this.element)).datepicker(),t(this.options.dom.submitButton,t(this.element)).button().on("click",t.proxy(this.commitOperation,this)),t(this.options.dom.cancelButton,t(this.element)).button().on("click",t.proxy(this.close,this))}})}(jQuery,window,document),function(t,o,i,e){"use strict";function n(o,i){this.element=o,this.settings=t.extend(!0,{},a,i||{}),this._defaults=a,this._name=s,this.init()}var s="lightbox",a={callbacks:{modalContentLoaded:null,openFailure:null},cssClass:"",dataType:"html",dialogType:"",dom:{cancelButton:".dlg-cancel-btn",datePicker:".datepicker",errorContainer:".alert-error",modalContainer:"#globalDialog",modalContentContainer:"#globalDialog .dialog-content",modalErrorContainer:"#globalDialog .alert-error",modalWidget:".ui-dialog",overlay:".ui-widget-overlay",submitButton:"dlg-commit-btn"},event:"click",height:"auto",urls:{imageDialog:"/ajax/lightbox-image.php"},width:"auto"};t.extend(n.prototype,{bindDialogHandlers:function(o,i,e){var n=this;if("error"===i)return this.displayError("Error loading dialog: "+e.statusText),void("function"==typeof n.settings.callbacks.openFailure&&n.settings.callbacks.openFailure(data));switch(t(this.settings.dom.modalContainer).dialog("open"),t(this.settings.dom.modalContentContainer+" img").on("load",function(){t(n.settings.dom.modalWidget).position({my:"center",at:"center",of:t(n.settings.dom.overlay)})}),t(this.settings.dom.datePicker,t(this.element)).datepicker(),t(this.settings.dom.submitButton,t(this.element)).button().on("click",t.proxy(this.commitOperation,this)),t(this.settings.dom.cancelButton,t(this.element)).button().on("click",t.proxy(this.close,this)),t(this.settings.dom.overlay).on("click",t.proxy(this.close,this)),this.settings.dialogType){case"image":t(this.settings.dom.modalContentContainer+" img").on("click",t.proxy(this.close,this))}if("function"==typeof n.settings.callbacks.modalContentLoaded){var s=n.settings.callbacks.modalContentLoaded;s.apply(n,Array.prototype.slice.call(arguments,1))}},close:function(){t(this.settings.dom.modalContainer).dialog("close")},collectDialogProperties:function(){var o={};if(o.url=t(this.element).data("url"),!o.url)throw"URL not provided.";return o},collectImageDialogProperties:function(){var o={url:this.settings.urls.imageDialog,data:{}};if(o.data.src=t(this.element).data("src"),o.data.alt=t(this.element).data("alt"),!o.data.src)throw"Image not provided.";return o},commitOperation:function(){throw"commitOperaiton() not implemented."},displayError:function(o){var i=t(this.settings.dom.errorContainer);0!==i.length&&i.html(o).show("slow")},init:function(){t(this.element).off(this.settings.event,t.proxy(this.open,this)).on(this.settings.event,t.proxy(this.open,this))},open:function(i){i.preventDefault();try{var e;switch(this.settings.dialogType){case"image":e=this.collectImageDialogProperties();break;default:e=this.collectDialogProperties()}}catch(n){return void this.displayError(n)}t(this.settings.dom.modalContainer).dialog({autoOpen:!1,closeOnEscape:!0,dialogClass:this.settings.cssClass,height:this.settings.height,modal:!0,position:{my:"center",at:"center",of:o},title:"",width:this.settings.width}),t(this.settings.dom.modalContentContainer).load(e.url,e.data,t.proxy(this.bindDialogHandlers,this))}}),t.fn[s]=function(o){return this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new n(this,o))})}}(jQuery,window,document);