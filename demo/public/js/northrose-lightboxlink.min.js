/*
 *  jquery-lightbox - v0.0.1
 *  Basic lightbox built off jQuery UI modal dialogs
 *  http://northrosedevs.com
 *
 *  Made by Damien Barchowsky
 *  Under MIT License
 */
!function(o,t,i,n){o.widget("northrose.lightboxLink",{options:{callbacks:{modalContentLoaded:null,openFailure:null},cssClass:"",dataType:"html",dom:{errorContainer:".alert-error:first",modalContainer:"#globalDialog",modalContentContainer:"#globalDialog .dialog-content",modalErrorContainer:"#globalDialog .alert-error",modalWidget:".ui-dialog",overlay:".ui-widget-overlay"},event:"click",height:"auto",urls:{dialogContent:""},width:"auto"},_create:function(){o(this.element).off(this.options.event,o.proxy(this.open,this)).on(this.options.event,o.proxy(this.open,this))},bindDialogHandlers:function(t,i,n){if("error"===i)return this.displayError("Error loading dialog: "+n.statusText),void("function"==typeof this.options.callbacks.openFailure&&this.options.callbacks.openFailure(data));if(o(this.options.dom.modalContainer).dialog("open"),o(this.options.dom.overlay).on("click",o.proxy(this.close,this)),"function"==typeof this.options.callbacks.modalContentLoaded){var e=this.options.callbacks.modalContentLoaded;e.apply(this,Array.prototype.slice.call(arguments,1))}},close:function(){o(this.options.dom.modalContainer).dialog("close")},collectDialogProperties:function(){var t={};if(t.url=o(this.element).data("url"),!t.url)throw"URL not provided.";return t},commitOperation:function(){throw"commitOperation() not implemented."},displayError:function(t){var i=o(this.options.dom.errorContainer);0!==i.length&&i.html(t).show("slow")},open:function(t){t.preventDefault();try{var i=this.collectDialogProperties()}catch(n){return void this.displayError(n)}o(this.options.dom.modalContainer).dialog({autoOpen:!1,closeOnEscape:!0,dialogClass:this.options.cssClass,height:this.options.height,modal:!0,title:"",width:this.options.width}),o(this.options.dom.modalContentContainer).load(this.options.urls.dialogContent,i,o.proxy(this.bindDialogHandlers,this))},_setOption:function(o,t){switch(o){case"someValue":}this._super("_setOption",o,t)}})}(jQuery,window,document),function(o,t,i,n){o.widget("northrose.imageLightboxLink",o.northrose.lightboxLink,{options:{dataType:"html",cssClass:"lightbox-image",urls:{dialogContent:"/ajax/lightbox-image"},keys:{imagePath:"src",imageAltText:"alt"}},bindDialogHandlers:function(t,i,n){this._super(t,i,n),o(this.options.dom.modalContentContainer+" img").off("load",o.proxy(this.centerDialog,this)).on("load",o.proxy(this.centerDialog,this)),o(this.options.dom.modalContentContainer+" img").off("click",o.proxy(this.close,this)).on("click",o.proxy(this.close,this))},centerDialog:function(){o(this.options.dom.modalWidget).position({my:"center",at:"center",of:o(this.options.dom.overlay)})},collectDialogProperties:function(){var t={src:o(this.element).data(this.options.keys.imagePath),alt:o(this.element).data(this.options.keys.imageAltText)};if(!t.src)throw"Image not provided.";return t}})}(jQuery,window,document),function(o,t,i,n){o.widget("northrose.formLightboxLink",o.northrose.lightboxLink,{options:{dataType:"html",dom:{cancelButton:".dlg-cancel-btn",datePicker:".datepicker",submitButton:"dlg-commit-btn"}},bindDialogHandlers:function(t,i,n){this._super(t,i,n),o(this.options.dom.datePicker,o(this.element)).datepicker(),o(this.options.dom.submitButton,o(this.element)).button().on("click",o.proxy(this.commitOperation,this)),o(this.options.dom.cancelButton,o(this.element)).button().on("click",o.proxy(this.close,this))}})}(jQuery,window,document);