/*
 *  jquery-lightbox - v0.0.1
 *  Basic lightbox built off jQuery UI modal dialogs
 *  http://northrosedevs.com
 *
 *  Made by Damien Barchowsky
 *  Under MIT License
 */
!function(t,e,i,n){"use strict";function o(e,i){this.element=e,this.settings=t.extend(!0,{},s,i||{}),this._defaults=s,this._name=a,this.init()}var a="lightbox",s={callbacks:{modalContentLoaded:null,openFailure:null,openSuccess:null},cssClass:"",dataType:"html",dialogType:"",dom:{cancelButton:".dlg-cancel-btn",datePicker:".datepicker",errorContainer:".alert-error",modalContainer:"#globalDialog",modalContentContainer:"#globalDialog .dialog-content",modalErrorContainer:"#globalDialog .alert-error",submitButton:"dlg-commit-btn"},event:"click",height:"auto",urls:{imageDialog:"/ajax/lightbox-image.php"},width:"auto"};t.extend(o.prototype,{bindDialogHandlers:function(){var e=this;t(this.settings.dom.datePicker,t(this.element)).datepicker(),t(this.settings.dom.submitButton,t(this.element)).button().on("click",this.commitOperation),t(this.settings.dom.cancelButton,t(this.element)).button().on("click",function(i){i.preventDefault(),t(e.settings.dom.modalContainer).lightbox("close")})},close:function(){t(this.settings.dom.modalContainer).dialog("close")},collectDialogProperties:function(){var e={};if(e.url=t(this.element).data("url"),!e.url)throw"URL not provided.";return e},collectImageDialogProperties:function(){var e={url:this.settings.urls.imageDialog,data:{}};if(e.data.src=t(this.element).data("src"),e.data.alt=t(this.element).data("alt"),!e.data.src)throw"Image not provided.";return e},commitOperation:function(){throw"commitOperaiton() not implemented."},display:function(e){var i=this;t(this.settings.dom.modalContentContainer).html(e),t(this.settings.dom.modalContainer).dialog({title:e.label,minWidth:360,width:this.settings.width,height:this.settings.height,dialogClass:this.settings.cssClass,closeOnEscape:!0,modal:!0,open:function(e,n){if(t(".ui-widget-overlay").on("click",function(t){t.preventDefault(),i.close()}),i.bindDialogHandlers(),"function"==typeof i.settings.callbacks.modalContentLoaded){var o=i.settings.callbacks.modalContentLoaded;o.apply(i,Array.prototype.slice.call(arguments,1))}}})},displayError:function(e){var i=t(this.settings.dom.errorContainer);0!==i.length&&i.html(e).show("slow")},init:function(){t(this.element).off(this.settings.event,t.proxy(this.open,this)).on(this.settings.event,t.proxy(this.open,this))},open:function(e){e.preventDefault();try{var i;switch(this.settings.dialogType){case"image":i=this.collectImageDialogProperties();break;default:i=this.collectDialogProperties()}}catch(n){return void this.displayError(n)}var o=this;t.ajax({method:"POST",url:i.url,data:i.data}).done(function(t){o.display(t),"function"==typeof o.settings.callbacks.openSuccess&&o.settings.callbacks.openSuccess(t)}).fail(function(t,e){o.displayError(e),"function"==typeof o.settings.callbacks.openFailure&&o.settings.callbacks.openFailure(data)})}}),t.fn[a]=function(e){return this.each(function(){t.data(this,"plugin_"+a)||t.data(this,"plugin_"+a,new o(this,e))})}}(jQuery,window,document);