/*
 *  lightboxLink - v0.1.0
 *  Attach behaviors to DOM elements that will open modal lightbox dialogs
 *  http://northrosedevs.com
 *
 *  Made by Damien Barchowsky
 *  Under MIT License
 */
!function(t,o,i,n){t.widget("northrose.lightboxLink",{options:{callbacks:{modalContentLoaded:null,openFailure:null},dataType:"html",dialogOptions:{autoOpen:!1,closeOnEscape:!0,dialogClass:"lightbox",height:"auto",modal:!0,title:"",width:"auto"},dom:{errorContainer:".alert-error:first",modalContainer:"#globalDialog",modalContentContainer:"#globalDialog .dialog-content",modalErrorContainer:"#globalDialog .alert-error",modalWidget:".ui-dialog",overlay:".ui-widget-overlay"},event:"click",keys:{dataSource:"src"},urls:{dialogContent:""}},_create:function(){t(this.element).off(this.options.event,t.proxy(this.open,this)).on(this.options.event,t.proxy(this.open,this))},bindDialogHandlers:function(o,i,n){if("error"===i)return this.displayError("Error loading dialog: "+n.statusText),void("function"==typeof this.options.callbacks.openFailure&&this.options.callbacks.openFailure(data));if(t(this.options.dom.modalContainer).dialog("open"),t(this.options.dom.overlay).on("click",t.proxy(this.close,this)),"function"==typeof this.options.callbacks.modalContentLoaded){var e=this.options.callbacks.modalContentLoaded;e.apply(this,Array.prototype.slice.call(arguments,1))}},close:function(){t(this.options.dom.modalContainer).dialog("close")},collectDialogProperties:function(){return{}},commitOperation:function(){throw"commitOperation() not implemented."},displayError:function(o){var i=t(this.options.dom.errorContainer);0!==i.length&&i.html(o).show("slow")},getLightboxContentURL:function(o){var i=this.options.urls.dialogContent;if(i||(i=t(this.element).data(this.options.keys.dataSource)),!i)throw"Lightbox content not specified!";return i},open:function(o){o.preventDefault();try{var i=this.collectDialogProperties()}catch(n){return void this.displayError(n)}try{var e=this.getLightboxContentURL(i)}catch(n){return void this.displayError(n)}t(this.options.dom.modalContainer).dialog(this.options.dialogOptions),t(this.options.dom.modalContentContainer).load(e,i,t.proxy(this.bindDialogHandlers,this))},_setOption:function(t,o){switch(t){case"someValue":}this._super("_setOption",t,o)}})}(jQuery,window,document),function(t,o,i,n){t.widget("northrose.imageLightboxLink",t.northrose.lightboxLink,{options:{dataType:"html",dialogOptions:{dialogClass:"lightbox lightbox-image",draggable:!1,resizable:!1},urls:{dialogContent:"/ajax/lightbox-image"},keys:{imagePath:"src",imageAltText:"alt"}},bindDialogHandlers:function(o,i,n){this._super(o,i,n),t(this.options.dom.modalContentContainer+" img").off("load",t.proxy(this.centerDialog,this)).on("load",t.proxy(this.centerDialog,this)),t(this.options.dom.modalContentContainer+" img").off("click",t.proxy(this.close,this)).on("click",t.proxy(this.close,this))},centerDialog:function(){t(this.options.dom.modalWidget).position({my:"center",at:"center",of:o})},collectDialogProperties:function(){var o={src:t(this.element).data(this.options.keys.imagePath),alt:t(this.element).data(this.options.keys.imageAltText)};if(!o.src)throw"Image not provided.";return o}})}(jQuery,window,document),function(t,o,i,n){t.widget("northrose.formLightboxLink",t.northrose.lightboxLink,{options:{dataType:"html",dom:{cancelButton:".dlg-cancel-btn",datePicker:".datepicker",submitButton:"dlg-commit-btn"}},bindDialogHandlers:function(o,i,n){this._super(o,i,n),t(this.options.dom.datePicker,t(this.element)).datepicker(),t(this.options.dom.submitButton,t(this.element)).button().on("click",t.proxy(this.commitOperation,this)),t(this.options.dom.cancelButton,t(this.element)).button().on("click",t.proxy(this.close,this))}})}(jQuery,window,document);